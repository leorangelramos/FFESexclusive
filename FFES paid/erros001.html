<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Encontre o Erro | FFES</title>
    <meta name="description" content="Teste sua gramática clicando na palavra errada em cada frase.">
    <link rel="icon" type="image/png" href="logofavicion.png">
    
    <link rel="stylesheet" href="universal.css">

    <style>
        #next-question-btn {
            display: none;
            margin-top: 15px;
            font-size: 1em;
        }

        /* Faz as palavras aparecerem lado-a-lado */
        #options-container.clickable-sentence {
            flex-direction: row; /* Alinha as palavras em linha */
            flex-wrap: wrap; /* Permite que a frase quebre a linha */
            justify-content: center; /* Centraliza a frase */
            gap: 8px; /* Espaço entre as palavras */
            padding: 10px;
        }
        
        /* Ajusta o tamanho do botão da palavra */
        #options-container.clickable-sentence .mc-option {
            flex-grow: 0; /* Impede que os botões estiquem */
            padding: 10px 15px;
            font-size: 1.2em; /* Deixa a fonte da frase maior */
        }
    </style>
</head>
<body>

<div class="cabecalho-container">
    <header class="bloco-identidade">
        <div class="logo-and-title">
            <a href="index.html">
                <img src="logo novo grande.png" alt="Logo FFES" class="logo-img">
            </a>
            <a href="https://www.youtube.com/@teacherleoramos/videos" target="_blank" style="text-decoration: none; color: inherit;">
                <h1>Leo Ramos | Professor de Inglês</h1>
            </a>
        </div>
    </header>
     <div class="bloco-navegacao"> 
        <nav class="nav-primary">
            <ul>
                <li><a href="index.html">Home</a></li>
            </ul>
        </nav>
    </div>
</div>

<main>

    <div id="placar-geral-container">
        <p>Acertos: <strong id="acertos-geral">0</strong></p>
        <a href="#contato" class="nav-arrow" title="Ir para o final da página">&#11015;</a>
        <p>Erros: <strong id="erros-geral">0</strong></p>
    </div>
    <button id="reset-btn" class="cta-button">Zerar Pontuação</button>

    <div class="exercise-page-container">
        
<div class="theory-box">
    <h2>Correção de Erros (Error Correction)</h2>
    <p>Este exercício testa sua atenção aos detalhes da gramática.</p>
    <p>Você verá uma frase que contém **um erro**. As palavras da frase se tornarão botões clicáveis. Seu objetivo é <strong>clicar na palavra errada</strong>.</p>
</div>


        <div class="exercise-container">
            
            <div id="quiz-area">
                <div class="exercise-card">
                    
                    <p id="question-prompt" class="exercise-prompt">Clique na palavra que está errada na frase abaixo:</p>
                    
                    <div id="options-container" class="mc-options clickable-sentence">
                    </div>
                    
                    <div id="feedback-message" class="feedback"></div>
                </div>
            </div>

            <button id="next-question-btn" class="cta-button" style="margin: 0 auto; display: none;">Próxima Pergunta</button>
            
            <div id="quiz-complete" class="exercise-card" style="display: none; text-align: center;">
                <h2>Quiz Concluído!</h2>
                <p>Você respondeu todas as perguntas.</p>
                <p>Use o botão "Zerar Pontuação" acima para tentar novamente.</p>
            </div>
            
        </div>
    </div>
</main>

<footer id="contato" class="site-footer">
    <div class="footer-content">
        </div>
</footer>


<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- BANCO DE DADOS DE PERGUNTAS ---
    // 'sentence': A frase completa
    // 'error': A palavra exata que está errada (sem pontuação)
    const allQuestions = [
        // Present Simple (do/does)
        { sentence: "She don't like coffee.", error: "don't" },
        { sentence: "He play soccer very well.", error: "play" },
        { sentence: "They lives in a big house.", error: "lives" },
        { sentence: "My cat like milk.", error: "like" },
        { sentence: "He don't have a car.", error: "don't" },
        { sentence: "Does she works here?", error: "works" },
        { sentence: "Do he study English?", error: "Do" },
        { sentence: "It rain a lot in winter.", error: "rain" },
        
        // Verbo To Be (am/is/are)
        { sentence: "They is happy.", error: "is" },
        { sentence: "He are a doctor.", error: "are" },
        { sentence: "I is tired.", error: "is" },
        { sentence: "We am students.", error: "am" },
        { sentence: "She are not from Spain.", error: "are" },
        
        // Past Simple
        { sentence: "I go to the park yesterday.", error: "go" },
        { sentence: "She eated pizza last night.", error: "eated" },
        { sentence: "They not watched the movie.", error: "not" }, // Erro de estrutura
        { sentence: "Did he found his keys?", error: "found" },
        { sentence: "We studyed for the test.", error: "studyed" },
        { sentence: "He breaked the window.", error: "breaked" },
        { sentence: "I did not knew the answer.", error: "knew" },
        
        // Present Continuous
        { sentence: "I am go to the store now.", error: "go" },
        { sentence: "He is read a book.", error: "read" },
        { sentence: "They not are playing.", error: "not" }, // Erro de estrutura
        
        // Present Perfect
        { sentence: "I have saw that movie.", error: "saw" },
        { sentence: "She has went to Japan.", error: "went" },
        { sentence: "They have not did the homework.", error: "did" },
        { sentence: "He have finished the work.", error: "have" },
        
        // Preposições (In, On, At)
        { sentence: "My birthday is in Monday.", error: "in" },
        { sentence: "I wake up on 7 AM.", error: "on" },
        { sentence: "He lives in the bus stop.", error: "in" },
        { sentence: "The book is on the table.", error: "on" }, // Exemplo correto (pegadinha) - ops, melhor evitar pegadinhas.
        { sentence: "The book is under the table.", error: "under" }, // Vou trocar
        { sentence: "I am good on math.", error: "on" },
        { sentence: "She is waiting on the corner.", error: "on" },
        
        // Much / Many / A / An
        { sentence: "I have much friends.", error: "much" },
        { sentence: "There is many water in the bottle.", error: "many" },
        { sentence: "I don't have many money.", error: "many" },
        { sentence: "She is a honest person.", error: "a" },
        { sentence: "He is an nice guy.", error: "an" },
        
        // Comparativos / Superlativos
        { sentence: "She is more tall than him.", error: "tall" }, // ou "more"
        { sentence: "He is the most fast runner.", error: "most" },
        { sentence: "This is more better.", error: "more" },
        
        // Outros
        { sentence: "There is two cats on the roof.", error: "is" },
        { sentence: "I like to playing soccer.", error: "playing" }
    ];

    // --- VARIÁVEIS DE ESTADO DO QUIZ ---
    let acertos = 0;
    let erros = 0;
    let availableQuestions = [];
    let currentQuestion = {};

    // --- ELEMENTOS DO DOM ---
    const placarAcertosEl = document.getElementById('acertos-geral');
    const placarErrosEl = document.getElementById('erros-geral');
    const resetBtn = document.getElementById('reset-btn');
    
    const questionPromptEl = document.getElementById('question-prompt');
    const optionsContainerEl = document.getElementById('options-container');
    const feedbackMessageEl = document.getElementById('feedback-message');
    const nextQuestionBtn = document.getElementById('next-question-btn');
    const quizAreaEl = document.getElementById('quiz-area');
    const quizCompleteEl = document.getElementById('quiz-complete');

    /**
     * Função auxiliar para "normalizar" o texto (REMOVER PONTUAÇÃO)
     * Essencial para comparar "pizza." com "pizza"
     */
    function normalizeText(text) {
        if (typeof text !== 'string') return '';
        return text.trim()
                   .toLowerCase()
                   .replace(/[.,?!]/g, ''); // Remove pontuação
    }

    // --- FUNÇÕES DO QUIZ ---

    function startQuiz() {
        availableQuestions = [...allQuestions];
        acertos = 0;
        erros = 0;
        atualizarPlacar();
        quizAreaEl.style.display = 'block';
        quizCompleteEl.style.display = 'none';
        nextQuestionBtn.style.display = 'none';
        loadNextQuestion();
    }

    function loadNextQuestion() {
        if (availableQuestions.length === 0) {
            quizAreaEl.style.display = 'none';
            nextQuestionBtn.style.display = 'none';
            quizCompleteEl.style.display = 'block';
            return;
        }

        // Reseta o estado
        feedbackMessageEl.textContent = '';
        feedbackMessageEl.className = 'feedback';
        optionsContainerEl.innerHTML = ''; // Limpa as opções antigas
        nextQuestionBtn.style.display = 'none'; 

        // Sorteia a pergunta
        const questionIndex = Math.floor(Math.random() * availableQuestions.length);
        currentQuestion = availableQuestions.splice(questionIndex, 1)[0]; 

        // *** A NOVA LÓGICA ***
        // Quebra a frase em palavras
        const words = currentQuestion.sentence.split(' ');
        
        // Pega o erro normalizado
        const normalizedError = normalizeText(currentQuestion.error);

        // Cria os botões de palavra
        words.forEach(word => {
            const wordButton = document.createElement('div');
            wordButton.className = 'mc-option';
            wordButton.textContent = word;
            
            // Compara a palavra (normalizada) com o erro (normalizado)
            const normalizedWord = normalizeText(word);
            
            if (normalizedWord === normalizedError) {
                wordButton.dataset.correct = 'true'; // "true" aqui significa que é o erro
            } else {
                wordButton.dataset.correct = 'false';
            }
            
            optionsContainerEl.appendChild(wordButton);
        });
    }

    function handleOptionClick(event) {
        const clickedOption = event.target.closest('.mc-option');
        
        if (!clickedOption || feedbackMessageEl.textContent !== '') {
            return;
        }

        const isCorrectClick = clickedOption.dataset.correct === 'true'; // O usuário clicou no erro

        if (isCorrectClick) {
            clickedOption.classList.add('correct-answer'); // Fica verde
            feedbackMessageEl.textContent = 'Correto! Esta é a palavra errada.';
            feedbackMessageEl.className = 'feedback correct';
            acertos++;
        } else {
            clickedOption.classList.add('incorrect-answer'); // Fica vermelho
            feedbackMessageEl.textContent = 'Incorreto. Esta palavra está certa.';
            feedbackMessageEl.className = 'feedback incorrect';
            
            // Mostra qual era o erro
            const correctOption = optionsContainerEl.querySelector('[data-correct="true"]');
            correctOption.classList.add('correct-answer');
            erros++;
        }

        atualizarPlacar();
        nextQuestionBtn.style.display = 'block'; // Mostra o botão "Próxima"
    }

    function atualizarPlacar() {
        placarAcertosEl.textContent = acertos;
        placarErrosEl.textContent = erros;
    }

    // --- EVENT LISTENERS ---
    optionsContainerEl.addEventListener('click', handleOptionClick);
    nextQuestionBtn.addEventListener('click', loadNextQuestion);
    resetBtn.addEventListener('click', startQuiz);

    // --- INICIALIZAÇÃO ---
    startQuiz();

});
</script>

</body>
</html>