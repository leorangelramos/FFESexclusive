<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Identificar a Palavra Ouvida | FFES</title>
    <meta name="description" content="Teste seu listening (audição) identificando a palavra correta em inglês.">
    <link rel="icon" type="image/png" href="logofavicion.png">
    
    <link rel="stylesheet" href="universal.css">

    <style>
        #next-question-btn {
            display: none;
            margin-top: 15px;
            font-size: 1em;
        }

        /* Botão de "Ouvir" */
        #listen-btn {
            font-size: 1.5em; /* Tamanho maior */
            padding: 15px 30px;
            margin-bottom: 25px;
        }

        /* Container para centralizar o botão de ouvir */
        #audio-controls {
            text-align: center;
        }
    </style>
</head>
<body>

<div class="cabecalho-container">
    <header class="bloco-identidade">
        <div class="logo-and-title">
            <a href="index.html">
                <img src="logo novo grande.png" alt="Logo FFES" class="logo-img">
            </a>
            <a href="https://www.youtube.com/@teacherleoramos/videos" target="_blank" style="text-decoration: none; color: inherit;">
                <h1>Leo Ramos | Professor de Inglês</h1>
            </a>
        </div>
    </header>
     <div class="bloco-navegacao"> 
        <nav class="nav-primary">
            <ul>
                <li><a href="index.html">Home</a></li>
            </ul>
        </nav>
    </div>
</div>

<main>

    <div id="placar-geral-container">
        <p>Acertos: <strong id="acertos-geral">0</strong></p>
        <a href="#contato" class="nav-arrow" title="Ir para o final da página">&#11015;</a>
        <p>Erros: <strong id="erros-geral">0</strong></p>
    </div>
    <button id="reset-btn" class="cta-button">Zerar Pontuação</button>

    <div class="exercise-page-container">
        
<div class="theory-box">
    <h2>Audição (Listening): Identificar a Palavra</h2>
    <p>Este exercício testa sua capacidade de diferenciar sons parecidos em inglês.</p>
    <p>Clique no botão <strong>"▶️ Ouvir"</strong>. O áudio falará uma das palavras listadas. Clique na opção que você acha que ouviu.</p>
</div>


        <div class="exercise-container">
            
            <div id="quiz-area">
                <div class="exercise-card">
                    
                    <p id="question-prompt" class="exercise-prompt">Clique no botão 'Ouvir' e escolha a palavra correta:</p>
                    
                    <div id="audio-controls">
                        <button id="listen-btn" class="cta-button">▶️ Ouvir</button>
                    </div>

                    <div id="options-container" class="mc-options">
                        </div>
                    
                    <div id="feedback-message" class="feedback"></div>
                </div>
            </div>

            <button id="next-question-btn" class="cta-button">Próxima Pergunta</button>
            
            <div id="quiz-complete" class="exercise-card" style="display: none; text-align: center;">
                <h2>Quiz Concluído!</h2>
                <p>Você respondeu todas as perguntas.</p>
                <p>Use o botão "Zerar Pontuação" acima para tentar novamente.</p>
            </div>
            
        </div>
    </div>
</main>

<footer id="contato" class="site-footer">
    <div class="footer-content">
        </div>
</footer>


<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- BANCO DE DADOS DE PERGUNTAS (Pares Mínimos) ---
    // A palavra com "correct: true" é a que será falada.
    const allQuestions = [
        { options: [ {text: "ship", correct: true}, {text: "sheep", correct: false}, {text: "shop", correct: false} ] },
        { options: [ {text: "sheep", correct: true}, {text: "ship", correct: false}, {text: "cheap", correct: false} ] },
        { options: [ {text: "this", correct: true}, {text: "these", correct: false}, {text: "the", correct: false} ] },
        { options: [ {text: "these", correct: true}, {text: "this", correct: false}, {text: "does", correct: false} ] },
        { options: [ {text: "live", correct: true}, {text: "leave", correct: false}, {text: "life", correct: false} ] },
        { options: [ {text: "leave", correct: true}, {text: "live", correct: false}, {text: "love", correct: false} ] },
        { options: [ {text: "cat", correct: true}, {text: "cut", correct: false}, {text: "cart", correct: false} ] },
        { options: [ {text: "cut", correct: true}, {text: "cat", correct: false}, {text: "cup", correct: false} ] },
        { options: [ {text: "hat", correct: true}, {text: "hot", correct: false}, {text: "heart", correct: false} ] },
        { options: [ {text: "hot", correct: true}, {text: "hat", correct: false}, {text: "hurt", correct: false} ] },
        { options: [ {text: "bad", correct: true}, {text: "bed", correct: false}, {text: "bat", correct: false} ] },
        { options: [ {text: "bed", correct: true}, {text: "bad", correct: false}, {text: "bird", correct: false} ] },
        { options: [ {text: "tree", correct: true}, {text: "three", correct: false}, {text: "free", correct: false} ] },
        { options: [ {text: "three", correct: true}, {text: "tree", correct: false}, {text: "through", correct: false} ] },
        { options: [ {text: "read", correct: true}, {text: "red", correct: false}, {text: "ride", correct: false} ] },
        { options: [ {text: "red", correct: true}, {text: "read", correct: false}, {text: "ready", correct: false} ] },
        { options: [ {text: "boat", correct: true}, {text: "bought", correct: false}, {text: "both", correct: false} ] },
        { options: [ {text: "bought", correct: true}, {text: "boat", correct: false}, {text: "bot", correct: false} ] },
        { options: [ {text: "it", correct: true}, {text: "eat", correct: false}, {text: "hit", correct: false} ] },
        { options: [ {text: "eat", correct: true}, {text: "it", correct: false}, {text: "heat", correct: false} ] },
        { options: [ {text: "full", correct: true}, {text: "fool", correct: false}, {text: "fall", correct: false} ] },
        { options: [ {text: "fool", correct: true}, {text: "full", correct: false}, {text: "fuel", correct: false} ] },
        { options: [ {text: "food", correct: true}, {text: "foot", correct: false}, {text: "fled", correct: false} ] },
        { options: [ {text: "foot", correct: true}, {text: "food", correct: false}, {text: "fit", correct: false} ] },
        { options: [ {text: "so", correct: true}, {text: "saw", correct: false}, {text: "soap", correct: false} ] },
        { options: [ {text: "saw", correct: true}, {text: "so", correct: false}, {text: "sell", correct: false} ] },
        { options: [ {text: "pen", correct: true}, {text: "pan", correct: false}, {text: "pain", correct: false} ] },
        { options: [ {text: "pan", correct: true}, {text: "pen", correct: false}, {text: "pin", correct: false} ] },
        { options: [ {text: "desk", correct: true}, {text: "disk", correct: false}, {text: "dusk", correct: false} ] },
        { options: [ {text: "disk", correct: true}, {text: "desk", correct: false}, {text: "task", correct: false} ] },
        { options: [ {text: "ten", correct: true}, {text: "tan", correct: false}, {text: "teen", correct: false} ] },
        { options: [ {text: "man", correct: true}, {text: "men", correct: false}, {text: "main", correct: false} ] },
        { options: [ {text: "men", correct: true}, {text: "man", correct: false}, {text: "mean", correct: false} ] },
        { options: [ {text: "walk", correct: true}, {text: "work", correct: false}, {text: "wake", correct: false} ] },
        { options: [ {text: "work", correct: true}, {text: "walk", correct: false}, {text: "wake", correct: false} ] },
        { options: [ {text: "talk", correct: true}, {text: "take", correct: false}, {text: "took", correct: false} ] },
        { options: [ {text: "car", correct: true}, {text: "card", correct: false}, {text: "core", correct: false} ] },
        { options: [ {text: "card", correct: true}, {text: "car", correct: false}, {text: "cart", correct: false} ] },
        { options: [ {text: "wait", correct: true}, {text: "wet", correct: false}, {text: "white", correct: false} ] },
        { options: [ {text: "wet", correct: true}, {text: "wait", correct: false}, {text: "what", correct: false} ] }
    ];

    // --- VARIÁVEIS DE ESTADO DO QUIZ ---
    let acertos = 0;
    let erros = 0;
    let availableQuestions = [];
    let currentQuestion = {};

    // --- ELEMENTOS DO DOM ---
    const placarAcertosEl = document.getElementById('acertos-geral');
    const placarErrosEl = document.getElementById('erros-geral');
    const resetBtn = document.getElementById('reset-btn');
    
    const listenBtn = document.getElementById('listen-btn'); // Botão de Ouvir
    const questionPromptEl = document.getElementById('question-prompt');
    const optionsContainerEl = document.getElementById('options-container');
    const feedbackMessageEl = document.getElementById('feedback-message');
    const nextQuestionBtn = document.getElementById('next-question-btn');
    const quizAreaEl = document.getElementById('quiz-area');
    const quizCompleteEl = document.getElementById('quiz-complete');

    // --- INICIALIZAÇÃO DA API DE FALA ---
    let synth;
    let utterance;
    
    // 1. Verifica se o navegador suporta a API
    if ('speechSynthesis' in window) {
        synth = window.speechSynthesis;
        utterance = new SpeechSynthesisUtterance();
        utterance.lang = 'en-US'; // Garante a voz em inglês
        utterance.rate = 0.8; // Um pouco mais lento para clareza
    } else {
        // Se não suportar, desabilita o quiz
        alert('Desculpe, seu navegador não suporta este exercício de áudio. Tente usar o Google Chrome ou Firefox.');
        quizAreaEl.innerHTML = `<p class="feedback incorrect" style="text-align: center;">Seu navegador não suporta a API de áudio necessária.</p>`;
        resetBtn.style.display = 'none';
    }


    // --- FUNÇÕES DO QUIZ ---

    function startQuiz() {
        if (!synth) return; // Não inicia se a API falhou
        availableQuestions = [...allQuestions];
        acertos = 0;
        erros = 0;
        atualizarPlacar();
        quizAreaEl.style.display = 'block';
        quizCompleteEl.style.display = 'none';
        nextQuestionBtn.style.display = 'none';
        loadNextQuestion();
    }

    function loadNextQuestion() {
        if (availableQuestions.length === 0) {
            quizAreaEl.style.display = 'none';
            nextQuestionBtn.style.display = 'none';
            quizCompleteEl.style.display = 'block';
            return;
        }

        feedbackMessageEl.textContent = '';
        feedbackMessageEl.className = 'feedback';
        optionsContainerEl.innerHTML = ''; 
        nextQuestionBtn.style.display = 'none'; 
        listenBtn.disabled = false; // Reabilita o botão de ouvir

        questionPromptEl.textContent = "Clique no botão 'Ouvir' e escolha a palavra que você ouviu:";

        const questionIndex = Math.floor(Math.random() * availableQuestions.length);
        currentQuestion = availableQuestions.splice(questionIndex, 1)[0]; 

        const shuffledOptions = currentQuestion.options.sort(() => Math.random() - 0.5);

        shuffledOptions.forEach(option => {
            const optionDiv = document.createElement('div');
            optionDiv.textContent = option.text;
            optionDiv.className = 'mc-option';
            optionDiv.dataset.correct = option.correct;
            optionsContainerEl.appendChild(optionDiv);
        });
    }

    // 2. FUNÇÃO PARA FALAR A PALAVRA
    function handleListenClick() {
        // Pega o texto da opção correta
        const wordToSpeak = currentQuestion.options.find(opt => opt.correct).text;
        
        utterance.text = wordToSpeak;
        synth.speak(utterance);
    }

    // 3. FUNÇÃO DE CHECAGEM
    function handleOptionClick(event) {
        const clickedOption = event.target.closest('.mc-option');
        
        if (!clickedOption || feedbackMessageEl.textContent !== '') {
            return;
        }

        listenBtn.disabled = true; // Desabilita o botão "Ouvir" após a resposta
        const isCorrect = clickedOption.dataset.correct === 'true';

        if (isCorrect) {
            clickedOption.classList.add('correct-answer');
            feedbackMessageEl.textContent = 'Correto!';
            feedbackMessageEl.className = 'feedback correct';
            acertos++;
        } else {
            clickedOption.classList.add('incorrect-answer');
            feedbackMessageEl.textContent = 'Incorreto.';
            feedbackMessageEl.className = 'feedback incorrect';
            
            const correctOption = optionsContainerEl.querySelector('[data-correct="true"]');
            correctOption.classList.add('correct-answer');
            erros++;
        }

        atualizarPlacar();
        nextQuestionBtn.style.display = 'block';
    }

    function atualizarPlacar() {
        placarAcertosEl.textContent = acertos;
        placarErrosEl.textContent = erros;
    }

    // --- EVENT LISTENERS ---
    optionsContainerEl.addEventListener('click', handleOptionClick);
    nextQuestionBtn.addEventListener('click', loadNextQuestion);
    resetBtn.addEventListener('click', startQuiz);
    listenBtn.addEventListener('click', handleListenClick); // O novo listener

    // --- INICIALIZAÇÃO ---
    startQuiz();

});
</script>

</body>
</html>